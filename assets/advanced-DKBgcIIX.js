import{j as t,r as d,R as q,a as ne}from"./client-BdDDBfAG.js";const ae={error:"bg-red-600",success:"bg-green-600",warning:"bg-yellow-600"},oe=({message:e,variant:s,onClose:r})=>t.jsxs("div",{className:`p-4 rounded-md shadow-md text-white flex justify-between items-center ${ae[s]}`,children:[t.jsx("span",{className:"mr-2",children:e}),t.jsx("button",{onClick:r,className:"text-white hover:text-gray-200",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),ie=({id:e,message:s,type:r,onClose:n})=>t.jsx(oe,{message:s,variant:r,onClose:()=>n(e)}),ce=({notifications:e,onClose:s})=>e.length===0?null:t.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:e.map(r=>t.jsx(ie,{...r,onClose:s},r.id))});function E(e,s){const[r,n]=d.useState(()=>{if(typeof window>"u")return s;try{const o=window.localStorage.getItem(e);return o?JSON.parse(o):s}catch(o){return console.error(`Error loading ${e} from localStorage:`,o),s}}),a=o=>{try{const i=o instanceof Function?o(r):o;n(i)}catch(i){console.error(`Error setting ${e} to localStorage:`,i)}};return d.useEffect(()=>{try{r===s||Array.isArray(r)&&r.length===0?window.localStorage.removeItem(e):window.localStorage.setItem(e,JSON.stringify(r))}catch(o){console.error(`Error saving ${e} to localStorage:`,o)}},[e,r,s]),[r,a]}const le=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],de=500,A={PRODUCTS:"products",CART:"cart",COUPONS:"coupons"},ue=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}];function xe(){const[e,s]=E(A.PRODUCTS,ue),r=d.useCallback(o=>{const i={...o,id:`p${Date.now()}`};s(l=>[...l,i])},[s]),n=d.useCallback((o,i)=>{s(l=>l.map(c=>c.id===o?{...c,...i}:c))},[s]),a=d.useCallback(o=>{s(i=>i.filter(l=>l.id!==o))},[s]);return{products:e,addProduct:r,updateProduct:n,deleteProduct:a}}const H=d.createContext(void 0),U=({children:e})=>{const s=xe();return t.jsx(H.Provider,{value:s,children:e})},D=()=>{const e=d.useContext(H);if(!e)throw new Error("useProductsContext must be used within ProductsProvider");return e},me=({item:e,cart:s})=>{const{discounts:r}=e.product,{quantity:n}=e,a=he({discounts:r,quantity:n});return s.some(i=>i.quantity>=10)?Math.min(a+.05,.5):a},he=({discounts:e,quantity:s})=>e.reduce((r,n)=>s>=n.quantity&&n.rate>r?n.rate:r,0),ge=e=>`${Math.round(e*100)}%`,be=({price:e,discountRate:s})=>Math.round(e*(1-s)),pe=({originalPrice:e,discountedPrice:s})=>e<=0||s>=e?0:Math.round((e-s)/e*100),je=({coupon:e,totalAmount:s})=>e.discountType==="amount"?Math.min(e.discountValue,s):Math.round(s*(e.discountValue/100)),fe=({coupon:e,totalAmount:s})=>{const r=je({coupon:e,totalAmount:s});return Math.max(0,s-r)},z=e=>e.discountType==="amount"?`${e.discountValue.toLocaleString()}원 할인`:`${e.discountValue}% 할인`,_=({item:e,cart:s})=>{const{price:r}=e.product,{quantity:n}=e,a=me({item:e,cart:s});return be({price:r*n,discountRate:a})},ye=({cart:e,product:s})=>e.find(n=>n.product.id===s.id)?e.map(n=>n.product.id===s.id?{...n,quantity:n.quantity+1}:n):[...e,{product:s,quantity:1}],Q=({cart:e,productId:s})=>e.filter(r=>r.product.id!==s),ve=({cart:e,productId:s,quantity:r})=>r<=0?Q({cart:e,productId:s}):e.map(n=>n.product.id===s?{...n,quantity:r}:n),O=({product:e,cart:s})=>{const r=s.find(n=>n.product.id===e.id);return e.stock-(r?.quantity||0)},J=e=>e.length===0,Ne=e=>e.reduce((s,r)=>s+r.quantity,0),Ce=({cart:e,selectedCoupon:s})=>{let r=0,n=0;return e.forEach(a=>{const o=a.product.price*a.quantity;r+=o,n+=_({item:a,cart:e})}),s&&(n=fe({coupon:s,totalAmount:n})),{totalBeforeDiscount:Math.round(r),totalAfterDiscount:Math.round(n)}};function we(){const[e,s]=E(A.CART,[]),[r,n]=d.useState(0);d.useEffect(()=>{n(Ne(e))},[e]);const a=d.useCallback(c=>{s(u=>ye({cart:u,product:c}))},[s]),o=d.useCallback(c=>{s(u=>Q({cart:u,productId:c}))},[s]),i=d.useCallback((c,u)=>{s(x=>ve({cart:x,productId:c,quantity:u}))},[s]),l=d.useCallback(()=>{s([])},[s]);return{cart:e,totalItemCount:r,addToCart:a,removeFromCart:o,updateQuantity:i,clearCart:l}}const K=d.createContext(void 0),ke=({children:e})=>{const s=we();return t.jsx(K.Provider,{value:s,children:e})},L=()=>{const e=d.useContext(K);if(!e)throw new Error("useCartContext must be used within CartProvider");return e};function Pe(){const[e,s]=E(A.COUPONS,le),r=d.useCallback(a=>{s(o=>[...o,a])},[s]),n=d.useCallback(a=>{s(o=>o.filter(i=>i.code!==a))},[s]);return{coupons:e,addCoupon:r,deleteCoupon:n}}const Y=d.createContext(void 0),G=({children:e})=>{const s=Pe();return t.jsx(Y.Provider,{value:s,children:e})},$=()=>{const e=d.useContext(Y);if(!e)throw new Error("useCouponsContext must be used within CouponsProvider");return e},Se=3e3;function Te(){const[e,s]=d.useState([]);d.useEffect(()=>{if(e.length===0)return;const a=e.map(o=>{const i=Se-(Date.now()-o.createdAt);return i<=0?(s(l=>l.filter(c=>c.id!==o.id)),null):setTimeout(()=>{s(l=>l.filter(c=>c.id!==o.id))},i)});return()=>{a.forEach(o=>{o&&clearTimeout(o)})}},[e]);const r=d.useCallback((a,o="success")=>{const i=Date.now().toString(),l=Date.now();s(c=>[...c,{id:i,message:a,type:o,createdAt:l}])},[]),n=d.useCallback(a=>{s(o=>o.filter(i=>i.id!==a))},[]);return{notifications:e,addNotification:r,removeNotification:n}}const X=d.createContext(void 0),De=({children:e})=>{const s=Te();return t.jsx(X.Provider,{value:s,children:e})},C=()=>{const e=d.useContext(X);if(!e)throw new Error("useNotificationsContext must be used within NotificationsProvider");return e},Le=({children:e})=>t.jsx(U,{children:t.jsx(ke,{children:t.jsx(G,{children:e})})}),$e=({children:e})=>t.jsx(U,{children:t.jsx(G,{children:e})}),Ve={primary:"bg-gray-900 text-white hover:bg-gray-800 disabled:bg-gray-100 disabled:text-gray-400",secondary:"bg-indigo-600 text-white hover:bg-indigo-700 disabled:bg-gray-100 disabled:text-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-100 disabled:text-gray-400",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 border border-gray-300"},Me={sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},k=({variant:e="primary",size:s="md",fullWidth:r=!1,className:n="",children:a,disabled:o,...i})=>t.jsx("button",{className:`
        ${Ve[e]}
        ${Me[s]}
        ${r?"w-full":""}
        rounded-md font-medium transition-colors
        disabled:cursor-not-allowed
        ${n}
      `.trim().replace(/\s+/g," "),disabled:o,...i,children:a}),V=({label:e,error:s,className:r="",...n})=>t.jsxs("div",{className:"w-full",children:[e&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t.jsx("input",{className:`
          w-full border rounded-md shadow-sm px-3 py-2
          focus:ring-indigo-500 focus:border-indigo-500
          ${s?"border-red-300":"border-gray-300"}
          ${r}
        `.trim().replace(/\s+/g," "),...n}),s&&t.jsx("p",{className:"mt-1 text-xs text-red-600",children:s})]}),Z=({label:e,options:s,placeholder:r,className:n="",...a})=>t.jsxs("div",{className:"w-full",children:[e&&t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e}),t.jsxs("select",{className:`
          w-full border border-gray-300 rounded-md shadow-sm px-3 py-2
          focus:ring-indigo-500 focus:border-indigo-500
          ${n}
        `.trim().replace(/\s+/g," "),...a,children:[r&&t.jsx("option",{value:"",children:r}),s.map(o=>t.jsx("option",{value:o.value,children:o.label},o.value))]})]}),F=({children:e,className:s="",hoverable:r=!1})=>t.jsx("div",{className:`
        bg-white rounded-lg border border-gray-200 overflow-hidden
        ${r?"hover:shadow-lg transition-shadow":""}
        ${s}
      `.trim().replace(/\s+/g," "),children:e}),Ie={primary:"bg-indigo-500 text-white",success:"bg-green-500 text-white",warning:"bg-orange-500 text-white",danger:"bg-red-500 text-white"},R=({children:e,variant:s="primary",className:r=""})=>t.jsx("span",{className:`
        ${Ie[s]}
        text-xs px-2 py-1 rounded
        ${r}
      `.trim().replace(/\s+/g," "),children:e}),qe=({columns:e,data:s,keyExtractor:r})=>t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:t.jsx("tr",{children:e.map(n=>t.jsx("th",{className:`px-6 py-3 text-${n.align||"left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:n.header},n.key))})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(n=>t.jsx("tr",{className:"hover:bg-gray-50",children:e.map(a=>t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-${a.align||"left"}`,children:a.render?a.render(n[a.key],n):n[a.key]},a.key))},r(n)))})]})}),j=({children:e})=>t.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4",children:t.jsx("div",{className:"flex justify-between items-center h-16",children:e})})});j.Left=({children:e})=>t.jsx("div",{className:"flex items-center flex-1",children:e});j.Right=({children:e})=>t.jsx("nav",{className:"flex items-center space-x-4",children:e});const ee=({text:e,className:s=""})=>t.jsx("h1",{className:`text-xl font-semibold text-gray-800 ${s}`,children:e}),Ee=({value:e,onChange:s,placeholder:r="검색...",className:n=""})=>t.jsx("div",{className:`ml-8 flex-1 max-w-md ${n}`,children:t.jsx("input",{type:"text",value:e,onChange:a=>s(a.target.value),placeholder:r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})}),Ae=({count:e})=>t.jsxs("div",{className:"relative",children:[t.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),e>0&&t.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:e})]}),te=({isActive:e,activeText:s,inactiveText:r,onClick:n})=>t.jsx("button",{onClick:n,className:`px-3 py-1.5 text-sm rounded transition-colors ${e?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:e?s:r}),se=q.createContext(null),Oe=()=>{const e=q.useContext(se);if(!e)throw new Error("Tabs compound components must be used within Tabs");return e},v=({children:e,value:s,onChange:r})=>t.jsx(se.Provider,{value:{activeValue:s,onChange:r},children:e});v.List=({children:e})=>t.jsx("div",{className:"border-b border-gray-200 mb-6",children:t.jsx("nav",{className:"-mb-px flex space-x-8",children:e})});v.Tab=({value:e,children:s})=>{const{activeValue:r,onChange:n}=Oe(),a=r===e;return t.jsx("button",{onClick:()=>n(e),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s})};const Re=({value:e,onChange:s,min:r=0,max:n,step:a=1})=>{const o=()=>{const u=e-a;u>=r&&s(u)},i=()=>{const u=e+a;(n===void 0||u<=n)&&s(u)},l=e<=r,c=n!==void 0&&e>=n;return t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:o,disabled:l,className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx("span",{className:"text-xs",children:"−"})}),t.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:e}),t.jsx("button",{onClick:i,disabled:c,className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:t.jsx("span",{className:"text-xs",children:"+"})})]})},P=e=>`₩${e.toLocaleString()}`,N=e=>`${e.toLocaleString()}원`,Be=({productName:e,quantity:s,totalPrice:r,discountRate:n,onIncrease:a,onDecrease:o,onRemove:i})=>{const l=n>0;return t.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:e}),t.jsx("button",{onClick:i,className:"text-gray-400 hover:text-red-500 ml-2",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(Re,{value:s,onChange:c=>{c>s?a():o()},min:1}),t.jsxs("div",{className:"text-right",children:[l&&t.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",n,"%"]}),t.jsx("p",{className:"text-sm font-medium text-gray-900",children:N(Math.round(r))})]})]})]})},We=({item:e,itemTotal:s,originalPrice:r,onUpdateQuantity:n,onRemove:a})=>{const o=pe({originalPrice:r,discountedPrice:s});return t.jsx(Be,{productName:e.product.name,quantity:e.quantity,totalPrice:s,discountRate:o,onIncrease:()=>n(e.product.id,e.quantity+1),onDecrease:()=>n(e.product.id,e.quantity-1),onRemove:()=>a(e.product.id)})},He=({cart:e,onUpdateQuantity:s,onRemoveFromCart:r})=>t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"장바구니"]}),J(e)?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),t.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):t.jsx("div",{className:"space-y-3",children:e.map(n=>{const a=_({item:n,cart:e}),o=n.product.price*n.quantity;return t.jsx(We,{item:n,itemTotal:a,originalPrice:o,onUpdateQuantity:s,onRemove:r},n.product.id)})})]}),Ue=({couponOptions:e,selectedValue:s,onChange:r,onRegisterClick:n})=>t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),n&&t.jsx("button",{onClick:n,className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),e.length>0&&t.jsx(Z,{options:e,placeholder:"쿠폰 선택",value:s,onChange:a=>r(a.target.value),className:"text-sm"})]}),ze=({selectedCoupon:e,onSelectCoupon:s})=>{const{coupons:r}=$(),n=r.map(o=>({value:o.code,label:`${o.name} (${z(o).replace(" 할인","")})`})),a=o=>{const i=r.find(l=>l.code===o);s(i||null)};return t.jsx(Ue,{couponOptions:n,selectedValue:e?.code||"",onChange:a})},_e=({name:e,description:s,priceText:r,discountText:n,maxDiscountRate:a,isRecommended:o,stockStatusText:i,stockStatus:l,onAddToCart:c})=>t.jsxs(F,{hoverable:!0,children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:t.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o&&t.jsx("span",{className:"absolute top-2 right-2",children:t.jsx(R,{variant:"danger",children:"BEST"})}),a>0&&t.jsx("span",{className:"absolute top-2 left-2",children:t.jsxs(R,{variant:"warning",children:["~",a,"%"]})})]}),t.jsxs("div",{className:"p-4",children:[t.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:e}),s&&t.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:s}),t.jsxs("div",{className:"mb-3",children:[t.jsx("p",{className:"text-lg font-bold text-gray-900",children:r}),n&&t.jsx("p",{className:"text-xs text-gray-500",children:n})]}),t.jsx("div",{className:"mb-3",children:t.jsx("p",{className:`text-xs font-medium ${l==="low"?"text-red-600":l==="available"?"text-gray-500":"text-gray-400"}`,children:i})}),t.jsx(k,{variant:"primary",fullWidth:!0,onClick:c,disabled:l==="out",children:l==="out"?"품절":"장바구니 담기"})]})]}),S=e=>e<=0,B=e=>e>0&&e<=5,Qe=e=>e.discounts.length===0?0:Math.max(...e.discounts.map(s=>s.rate)),Je=({products:e,searchTerm:s})=>{if(!s)return e;const r=s.toLowerCase();return e.filter(n=>n.name.toLowerCase().includes(r)||n.description?.toLowerCase().includes(r))},Ke=({product:e,remainingStock:s,onAddToCart:r})=>{const{products:n}=D(),{cart:a}=L(),o=(x,h)=>{if(!h)return P(x);const p=n.find(b=>b.id===h);if(!p)return P(x);const y=O({product:p,cart:a}),w=S(y),m=a.find(b=>b.product.id===h)?.quantity||0;return w?`${P(x)} (품절)`:`${P(x)} (재고: ${y-m})`},i=Qe(e)*100,l=e.discounts.length>0?`${e.discounts[0].quantity}개 이상 구매시 할인 ${ge(e.discounts[0].rate)}`:void 0,c=S(s)?"out":B(s)?"low":"available",u=S(s)?"품절":B(s)?`품절임박! ${s}개 남음`:`재고 ${s}개`;return t.jsx(_e,{name:e.name,description:e.description,priceText:o(e.price,e.id),discountText:l,maxDiscountRate:i,isRecommended:e.isRecommended??!1,stockStatusText:u,stockStatus:c,onAddToCart:()=>r(e)})},Ye=({products:e,onAddToCart:s,searchTerm:r=""})=>{const{cart:n}=L();return e.length===0?t.jsx("div",{className:"text-center py-12",children:t.jsxs("p",{className:"text-gray-500",children:['"',r,'"에 대한 검색 결과가 없습니다.']})}):t.jsxs("section",{children:[t.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),t.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",e.length,"개 상품"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(a=>{const o=O({product:a,cart:n});return t.jsx(Ke,{product:a,remainingStock:o,onAddToCart:s},a.id)})})]})},Ge=({totalBeforeDiscount:e,totalAfterDiscount:s,onCompleteOrder:r})=>t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-600",children:"상품 금액"}),t.jsx("span",{className:"font-medium",children:N(e)})]}),e-s>0&&t.jsxs("div",{className:"flex justify-between text-red-500",children:[t.jsx("span",{children:"할인 금액"}),t.jsxs("span",{children:["-",N(e-s)]})]}),t.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[t.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),t.jsx("span",{className:"font-bold text-lg text-gray-900",children:N(s)})]})]}),t.jsxs(k,{variant:"primary",fullWidth:!0,onClick:r,className:"mt-4 bg-yellow-400 hover:bg-yellow-500 text-gray-900",children:[N(s)," 결제하기"]}),t.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:t.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]}),Xe=({searchTerm:e})=>{const{products:s}=D(),{cart:r,addToCart:n,updateQuantity:a,removeFromCart:o,clearCart:i}=L(),{addNotification:l}=C(),[c,u]=d.useState(null),x=d.useMemo(()=>Je({products:s,searchTerm:e}),[s,e]),h=d.useMemo(()=>Ce({cart:r,selectedCoupon:c}),[r,c]),p=d.useCallback(g=>{const m=O({cart:r,product:g});if(S(m)){l("재고가 부족합니다!","error");return}const b=r.find(f=>f.product.id===g.id);if(b&&b.quantity+1>g.stock){l(`재고는 ${g.stock}개까지만 있습니다.`,"error");return}n(g),l("장바구니에 담았습니다","success")},[r,n,l]),y=d.useCallback((g,m)=>{const b=s.find(re=>re.id===g);if(!b)return;const f=b.stock;if(m>f){l(`재고는 ${f}개까지만 있습니다.`,"error");return}a(g,m)},[s,a,l]),w=()=>{i(),u(null);const g=`ORD-${Date.now()}`;l(`주문이 완료되었습니다.  주문번호: ${g}`,"success")};return t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"lg:col-span-3",children:t.jsx(Ye,{products:x,onAddToCart:p,searchTerm:e})}),t.jsx("div",{className:"lg:col-span-1",children:t.jsxs("div",{className:"sticky top-24 space-y-4",children:[t.jsx(He,{cart:r,onUpdateQuantity:y,onRemoveFromCart:o}),!J(r)&&t.jsxs(t.Fragment,{children:[t.jsx(ze,{selectedCoupon:c,onSelectCoupon:u}),t.jsx(Ge,{totalBeforeDiscount:h.totalBeforeDiscount,totalAfterDiscount:h.totalAfterDiscount,onCompleteOrder:w})]})]})})]})},Ze=({searchTerm:e,setSearchTerm:s,debouncedSearchTerm:r,isAdmin:n,setIsAdmin:a})=>{const{totalItemCount:o}=L();return t.jsxs(t.Fragment,{children:[t.jsxs(j,{children:[t.jsxs(j.Left,{children:[t.jsx(ee,{text:"SHOP"}),t.jsx(Ee,{value:e,onChange:s,placeholder:"상품 검색..."})]}),t.jsxs(j.Right,{children:[t.jsx(te,{isActive:n,activeText:"쇼핑몰로 돌아가기",inactiveText:"관리자 페이지로",onClick:()=>a(!n)}),t.jsx(Ae,{count:o})]})]}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:t.jsx(Xe,{searchTerm:r})})]})},Fe=({onEditProduct:e,onDeleteProduct:s,onAddProduct:r})=>{const{products:n}=D(),a=i=>N(i),o=[{key:"name",header:"상품명",render:i=>t.jsx("span",{className:"font-medium text-gray-900",children:i})},{key:"price",header:"가격",render:(i,l)=>t.jsx("span",{className:"text-gray-500",children:a(l.price)})},{key:"stock",header:"재고",render:i=>t.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i>10?"bg-green-100 text-green-800":i>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[i,"개"]})},{key:"description",header:"설명",render:i=>t.jsx("span",{className:"text-gray-500 max-w-xs truncate block",children:i||"-"})},{key:"actions",header:"작업",align:"right",render:(i,l)=>t.jsxs("div",{className:"font-medium",children:[t.jsx("button",{onClick:()=>e(l),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),t.jsx("button",{onClick:()=>s(l.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})}];return t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),t.jsx(k,{variant:"primary",size:"md",onClick:r,children:"새 상품 추가"})]})}),t.jsx(qe,{columns:o,data:n,keyExtractor:i=>i.id})]})},et=e=>e<0?{isValid:!1,error:"가격은 0보다 커야 합니다"}:{isValid:!0},tt=e=>e<0?{isValid:!1,error:"재고는 0보다 커야 합니다"}:e>9999?{isValid:!1,error:"재고는 9999개를 초과할 수 없습니다"}:{isValid:!0},st=e=>e<0?{isValid:!1,error:"할인 금액은 0원 이상이어야 합니다"}:e>1e5?{isValid:!1,error:"할인 금액은 100,000원을 초과할 수 없습니다"}:{isValid:!0},rt=e=>e<0?{isValid:!1,error:"할인율은 0% 이상이어야 합니다"}:e>100?{isValid:!1,error:"할인율은 100%를 초과할 수 없습니다"}:{isValid:!0},I=e=>e===""||/^\d+$/.test(e),T=(e,s=0)=>{if(e==="")return s;const r=parseInt(e);return isNaN(r)?s:r},nt=({couponForm:e,onFormChange:s,onSubmit:r,onCancel:n})=>{const{addNotification:a}=C(),o=[{value:"amount",label:"정액 할인"},{value:"percentage",label:"정률 할인"}],i=c=>{I(c)&&s({...e,discountValue:T(c,0)})},l=c=>{const u=T(c,0);if(e.discountType==="percentage"){const x=rt(u);x.isValid||(a(x.error,"error"),s({...e,discountValue:u>100?100:0}))}else{const x=st(u);x.isValid||(a(x.error,"error"),s({...e,discountValue:u>1e5?1e5:0}))}};return t.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:t.jsxs("form",{onSubmit:r,className:"space-y-4",children:[t.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[t.jsx(V,{label:"쿠폰명",type:"text",value:e.name,onChange:c=>s({...e,name:c.target.value}),placeholder:"신규 가입 쿠폰",className:"text-sm",required:!0}),t.jsx(V,{label:"쿠폰 코드",type:"text",value:e.code,onChange:c=>s({...e,code:c.target.value.toUpperCase()}),placeholder:"WELCOME2024",className:"text-sm font-mono",required:!0}),t.jsx(Z,{label:"할인 타입",options:o,value:e.discountType,onChange:c=>s({...e,discountType:c.target.value}),className:"text-sm"}),t.jsx(V,{label:e.discountType==="amount"?"할인 금액":"할인율(%)",type:"text",value:e.discountValue===0?"":e.discountValue,onChange:c=>i(c.target.value),onBlur:c=>l(c.target.value),placeholder:e.discountType==="amount"?"5000":"10",className:"text-sm",required:!0})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(k,{variant:"ghost",type:"button",onClick:n,children:"취소"}),t.jsx(k,{variant:"secondary",type:"submit",children:"쿠폰 생성"})]})]})})},at=({name:e,code:s,discountText:r,onDelete:n})=>t.jsx(F,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:t.jsx("div",{className:"p-4",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-gray-900",children:e}),t.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:s}),t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:r})})]}),t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-red-600 transition-colors",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),ot=({onDeleteCoupon:e,onToggleCouponForm:s})=>{const{coupons:r}=$();return t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[r.map(n=>t.jsx(at,{name:n.name,code:n.code,discountText:z(n),onDelete:()=>e(n.code)},n.code)),t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:t.jsxs("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[t.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]})},M={name:"",code:"",discountType:"amount",discountValue:0},it=()=>{const{coupons:e,addCoupon:s}=$(),{addNotification:r}=C(),[n,a]=d.useState(!1),[o,i]=d.useState(M),l=d.useCallback(()=>{a(x=>!x),n||i(M)},[n]),c=d.useCallback(x=>{if(x.preventDefault(),e.find(p=>p.code===o.code)){r("이미 존재하는 쿠폰 코드입니다.","error");return}s(o),r("쿠폰이 추가되었습니다.","success"),a(!1),i(M)},[o,e,s,r]),u=d.useCallback(()=>{a(!1)},[]);return{showForm:n,formData:o,setFormData:i,handleToggleForm:l,handleSubmit:c,handleCancel:u}},ct=()=>{const{deleteCoupon:e}=$(),{showForm:s,formData:r,setFormData:n,handleToggleForm:a,handleSubmit:o,handleCancel:i}=it();return t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[t.jsx("div",{className:"p-6 border-b border-gray-200",children:t.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),t.jsxs("div",{className:"p-6",children:[t.jsx(ot,{onDeleteCoupon:e,onToggleCouponForm:a}),s&&t.jsx(nt,{couponForm:r,onFormChange:n,onSubmit:o,onCancel:i})]})]})},lt=({isVisible:e,isEditing:s,productForm:r,onFormChange:n,onSubmit:a,onCancel:o})=>{const{addNotification:i}=C();return e?t.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:t.jsxs("form",{onSubmit:a,className:"space-y-4",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s?"상품 수정":"새 상품 추가"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),t.jsx("input",{type:"text",value:r.name,onChange:l=>n({...r,name:l.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),t.jsx("input",{type:"text",value:r.description,onChange:l=>n({...r,description:l.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),t.jsx("input",{type:"text",value:r.price===0?"":r.price,onChange:l=>{const c=l.target.value;I(c)&&n({...r,price:T(c,0)})},onBlur:l=>{const c=l.target.value;if(c==="")n({...r,price:0});else{const u=parseInt(c),x=et(u);x.isValid||(i(x.error,"error"),n({...r,price:0}))}},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),t.jsx("input",{type:"text",value:r.stock===0?"":r.stock,onChange:l=>{const c=l.target.value;I(c)&&n({...r,stock:T(c,0)})},onBlur:l=>{const c=l.target.value;if(c==="")n({...r,stock:0});else{const u=parseInt(c),x=tt(u);if(!x.isValid){i(x.error,"error");const h=u>9999?9999:0;n({...r,stock:h})}}},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),t.jsxs("div",{className:"mt-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),t.jsxs("div",{className:"space-y-2",children:[r.discounts.map((l,c)=>t.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[t.jsx("input",{type:"number",value:l.quantity,onChange:u=>{const x=[...r.discounts];x[c].quantity=parseInt(u.target.value)||0,n({...r,discounts:x})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),t.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),t.jsx("input",{type:"number",value:l.rate*100,onChange:u=>{const x=[...r.discounts];x[c].rate=(parseInt(u.target.value)||0)/100,n({...r,discounts:x})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),t.jsx("span",{className:"text-sm",children:"% 할인"}),t.jsx("button",{type:"button",onClick:()=>{const u=r.discounts.filter((x,h)=>h!==c);n({...r,discounts:u})},className:"text-red-600 hover:text-red-800",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c)),t.jsx("button",{type:"button",onClick:()=>{n({...r,discounts:[...r.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:s?"수정":"추가"})]})]})}):null},W={name:"",price:0,stock:0,description:"",discounts:[]},dt=()=>{const{addProduct:e,updateProduct:s,deleteProduct:r}=D(),{addNotification:n}=C(),[a,o]=d.useState(!1),[i,l]=d.useState(null),[c,u]=d.useState(W),x=i!==null&&i!=="new",h=d.useCallback(()=>{l("new"),o(!0),u(W)},[]),p=d.useCallback(m=>{l(m.id),o(!0),u({name:m.name,price:m.price,stock:m.stock,description:m.description||"",discounts:m.discounts||[]})},[]),y=d.useCallback(m=>{m.preventDefault();const b={...c,discounts:c.discounts.filter(f=>f.quantity>0&&f.rate>0)};i==="new"?(e(b),n("상품이 추가되었습니다.","success")):i&&(s(i,b),n("상품이 수정되었습니다.","success")),o(!1),l(null)},[c,i,e,s,n]),w=d.useCallback(()=>{o(!1),l(null)},[]),g=d.useCallback(m=>{r(m),n("상품이 삭제되었습니다.","success")},[r,n]);return{showForm:a,isEditing:x,formData:c,setFormData:u,handleAddClick:h,handleEdit:p,handleSubmit:y,handleCancel:w,handleDelete:g}},ut=()=>{const{showForm:e,isEditing:s,formData:r,setFormData:n,handleAddClick:a,handleEdit:o,handleSubmit:i,handleCancel:l,handleDelete:c}=dt();return t.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[t.jsx(Fe,{onEditProduct:o,onDeleteProduct:c,onAddProduct:a}),e&&t.jsx(lt,{isVisible:e,isEditing:s,productForm:r,onFormChange:n,onSubmit:i,onCancel:l})]})},xt=()=>{const[e,s]=d.useState("products");return t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),t.jsx(v,{value:e,onChange:s,children:t.jsxs(v.List,{children:[t.jsx(v.Tab,{value:"products",children:"상품 관리"}),t.jsx(v.Tab,{value:"coupons",children:"쿠폰 관리"})]})}),e==="products"?t.jsx(ut,{}):t.jsx(ct,{})]})},mt=({isAdmin:e,setIsAdmin:s})=>t.jsxs(t.Fragment,{children:[t.jsxs(j,{children:[t.jsx(j.Left,{children:t.jsx(ee,{text:"SHOP"})}),t.jsx(j.Right,{children:t.jsx(te,{isActive:e,activeText:"쇼핑몰로 돌아가기",inactiveText:"관리자 페이지로",onClick:()=>s(!e)})})]}),t.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:t.jsx(xt,{})})]});function ht(e,s=de){const[r,n]=d.useState(e);return d.useEffect(()=>{const a=setTimeout(()=>{n(e)},s);return()=>{clearTimeout(a)}},[e,s]),r}const gt=()=>{const{notifications:e,removeNotification:s}=C(),[r,n]=d.useState(!1),[a,o]=d.useState(""),i=ht(a,500);return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx(ce,{notifications:e,onClose:s}),r?t.jsx($e,{children:t.jsx(mt,{isAdmin:r,setIsAdmin:n})}):t.jsx(Le,{children:t.jsx(Ze,{searchTerm:a,setSearchTerm:o,debouncedSearchTerm:i,isAdmin:r,setIsAdmin:n})})]})},bt=()=>t.jsx(De,{children:t.jsx(gt,{})});ne.createRoot(document.getElementById("root")).render(t.jsx(q.StrictMode,{children:t.jsx(bt,{})}));
