import{j as e,R,r as d,a as G}from"./client-BdDDBfAG.js";const X={primary:"bg-gray-900 text-white hover:bg-gray-800 disabled:bg-gray-100 disabled:text-gray-400",secondary:"bg-indigo-600 text-white hover:bg-indigo-700 disabled:bg-gray-100 disabled:text-gray-400",danger:"bg-red-600 text-white hover:bg-red-700 disabled:bg-gray-100 disabled:text-gray-400",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 border border-gray-300"},Z={sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},P=({variant:t="primary",size:s="md",fullWidth:r=!1,className:n="",children:a,disabled:o,...i})=>e.jsx("button",{className:`
        ${X[t]}
        ${Z[s]}
        ${r?"w-full":""}
        rounded-md font-medium transition-colors
        disabled:cursor-not-allowed
        ${n}
      `.trim().replace(/\s+/g," "),disabled:o,...i,children:a}),B=({label:t,error:s,className:r="",...n})=>e.jsxs("div",{className:"w-full",children:[t&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsx("input",{className:`
          w-full border rounded-md shadow-sm px-3 py-2
          focus:ring-indigo-500 focus:border-indigo-500
          ${s?"border-red-300":"border-gray-300"}
          ${r}
        `.trim().replace(/\s+/g," "),...n}),s&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:s})]}),H=({label:t,options:s,placeholder:r,className:n="",...a})=>e.jsxs("div",{className:"w-full",children:[t&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsxs("select",{className:`
          w-full border border-gray-300 rounded-md shadow-sm px-3 py-2
          focus:ring-indigo-500 focus:border-indigo-500
          ${n}
        `.trim().replace(/\s+/g," "),...a,children:[r&&e.jsx("option",{value:"",children:r}),s.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))]})]}),_=({children:t,className:s="",hoverable:r=!1})=>e.jsx("div",{className:`
        bg-white rounded-lg border border-gray-200 overflow-hidden
        ${r?"hover:shadow-lg transition-shadow":""}
        ${s}
      `.trim().replace(/\s+/g," "),children:t}),F={primary:"bg-indigo-500 text-white",success:"bg-green-500 text-white",warning:"bg-orange-500 text-white",danger:"bg-red-500 text-white"},z=({children:t,variant:s="primary",className:r=""})=>e.jsx("span",{className:`
        ${F[s]}
        text-xs px-2 py-1 rounded
        ${r}
      `.trim().replace(/\s+/g," "),children:t}),ee=({columns:t,data:s,keyExtractor:r})=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsx("tr",{children:t.map(n=>e.jsx("th",{className:`px-6 py-3 text-${n.align||"left"} text-xs font-medium text-gray-500 uppercase tracking-wider`,children:n.header},n.key))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(n=>e.jsx("tr",{className:"hover:bg-gray-50",children:t.map(a=>e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-${a.align||"left"}`,children:a.render?a.render(n[a.key],n):n[a.key]},a.key))},r(n)))})]})}),L=({children:t})=>e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40 border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsx("div",{className:"flex justify-between items-center h-16",children:t})})});L.Left=({children:t})=>e.jsx("div",{className:"flex items-center flex-1",children:t});L.Right=({children:t})=>e.jsx("nav",{className:"flex items-center space-x-4",children:t});const te=({text:t,className:s=""})=>e.jsx("h1",{className:`text-xl font-semibold text-gray-800 ${s}`,children:t}),se=({value:t,onChange:s,placeholder:r="검색...",className:n=""})=>e.jsx("div",{className:`ml-8 flex-1 max-w-md ${n}`,children:e.jsx("input",{type:"text",value:t,onChange:a=>s(a.target.value),placeholder:r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"})}),re=({count:t})=>e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),t>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:t})]}),ne=({isActive:t,activeText:s,inactiveText:r,onClick:n})=>e.jsx("button",{onClick:n,className:`px-3 py-1.5 text-sm rounded transition-colors ${t?"bg-gray-800 text-white":"text-gray-600 hover:text-gray-900"}`,children:t?s:r}),ae={error:"bg-red-600",success:"bg-green-600",warning:"bg-yellow-600"},oe=({message:t,variant:s,onClose:r})=>e.jsxs("div",{className:`p-4 rounded-md shadow-md text-white flex justify-between items-center ${ae[s]}`,children:[e.jsx("span",{className:"mr-2",children:t}),e.jsx("button",{onClick:r,className:"text-white hover:text-gray-200",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Q=R.createContext(null),ce=()=>{const t=R.useContext(Q);if(!t)throw new Error("Tabs compound components must be used within Tabs");return t},k=({children:t,value:s,onChange:r})=>e.jsx(Q.Provider,{value:{activeValue:s,onChange:r},children:t});k.List=({children:t})=>e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:t})});k.Tab=({value:t,children:s})=>{const{activeValue:r,onChange:n}=ce(),a=r===t;return e.jsx("button",{onClick:()=>n(t),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s})};const ie=({value:t,onChange:s,min:r=0,max:n,step:a=1})=>{const o=()=>{const u=t-a;u>=r&&s(u)},i=()=>{const u=t+a;(n===void 0||u<=n)&&s(u)},l=t<=r,c=n!==void 0&&t>=n;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:o,disabled:l,className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{className:"text-xs",children:"−"})}),e.jsx("span",{className:"mx-3 text-sm font-medium w-8 text-center",children:t}),e.jsx("button",{onClick:i,disabled:c,className:"w-6 h-6 rounded border border-gray-300 flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("span",{className:"text-xs",children:"+"})})]})},le=({id:t,message:s,type:r,onClose:n})=>e.jsx(oe,{message:s,variant:r,onClose:()=>n(t)}),de=({notifications:t,onClose:s})=>t.length===0?null:e.jsx("div",{className:"fixed top-20 right-4 z-50 space-y-2 max-w-sm",children:t.map(r=>e.jsx(le,{...r,onClose:s},r.id))}),ue=({productName:t,quantity:s,totalPrice:r,discountRate:n,onIncrease:a,onDecrease:o,onRemove:i})=>{const l=n>0;return e.jsxs("div",{className:"border-b pb-3 last:border-b-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 flex-1",children:t}),e.jsx("button",{onClick:i,className:"text-gray-400 hover:text-red-500 ml-2",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ie,{value:s,onChange:c=>{c>s?a():o()},min:1}),e.jsxs("div",{className:"text-right",children:[l&&e.jsxs("span",{className:"text-xs text-red-500 font-medium block",children:["-",n,"%"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Math.round(r).toLocaleString(),"원"]})]})]})]})},xe=({item:t,itemTotal:s,originalPrice:r,onUpdateQuantity:n,onRemove:a})=>{const i=s<r?Math.round((1-s/r)*100):0;return e.jsx(ue,{productName:t.product.name,quantity:t.quantity,totalPrice:s,discountRate:i,onIncrease:()=>n(t.product.id,t.quantity+1),onDecrease:()=>n(t.product.id,t.quantity-1),onRemove:()=>a(t.product.id)})},me=({item:t,cart:s})=>{const{discounts:r}=t.product,{quantity:n}=t,a=he({discounts:r,quantity:n});return s.some(i=>i.quantity>=10)?Math.min(a+.05,.5):a},he=({discounts:t,quantity:s})=>t.reduce((r,n)=>s>=n.quantity&&n.rate>r?n.rate:r,0),ge=({coupon:t,totalAmount:s})=>t.discountType==="amount"?Math.min(t.discountValue,s):Math.round(s*(t.discountValue/100)),be=({coupon:t,totalAmount:s})=>{const r=ge({coupon:t,totalAmount:s});return Math.max(0,s-r)},J=({item:t,cart:s})=>{const{price:r}=t.product,{quantity:n}=t,a=me({item:t,cart:s});return Math.round(r*n*(1-a))},pe=({cart:t,product:s})=>t.find(n=>n.product.id===s.id)?t.map(n=>n.product.id===s.id?{...n,quantity:n.quantity+1}:n):[...t,{product:s,quantity:1}],K=({cart:t,productId:s})=>t.filter(r=>r.product.id!==s),je=({cart:t,productId:s,quantity:r})=>r<=0?K({cart:t,productId:s}):t.map(n=>n.product.id===s?{...n,quantity:r}:n),O=({product:t,cart:s})=>{const r=s.find(n=>n.product.id===t.id);return t.stock-(r?.quantity||0)},fe=t=>t.reduce((s,r)=>s+r.quantity,0),ye=({cart:t,selectedCoupon:s})=>{let r=0,n=0;return t.forEach(a=>{const o=a.product.price*a.quantity;r+=o,n+=J({item:a,cart:t})}),s&&(n=be({coupon:s,totalAmount:n})),{totalBeforeDiscount:Math.round(r),totalAfterDiscount:Math.round(n)}},ve=({cart:t,onUpdateQuantity:s,onRemoveFromCart:r})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"장바구니"]}),t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"장바구니가 비어있습니다"})]}):e.jsx("div",{className:"space-y-3",children:t.map(n=>{const a=J({item:n,cart:t}),o=n.product.price*n.quantity;return e.jsx(xe,{item:n,itemTotal:a,originalPrice:o,onUpdateQuantity:s,onRemove:r},n.product.id)})})]}),Ne=({couponOptions:t,selectedValue:s,onChange:r,onRegisterClick:n})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"쿠폰 할인"}),n&&e.jsx("button",{onClick:n,className:"text-xs text-blue-600 hover:underline",children:"쿠폰 등록"})]}),t.length>0&&e.jsx(H,{options:t,placeholder:"쿠폰 선택",value:s,onChange:a=>r(a.target.value),className:"text-sm"})]}),Ce=({coupons:t,selectedCoupon:s,onSelectCoupon:r})=>{const n=t.map(o=>({value:o.code,label:`${o.name} (${o.discountType==="amount"?`${o.discountValue.toLocaleString()}원`:`${o.discountValue}%`})`})),a=o=>{const i=t.find(l=>l.code===o);r(i||null)};return e.jsx(Ne,{couponOptions:n,selectedValue:s?.code||"",onChange:a})},we=({name:t,description:s,priceText:r,discountText:n,maxDiscountRate:a,isRecommended:o,stockStatusText:i,stockStatus:l,onAddToCart:c})=>e.jsxs(_,{hoverable:!0,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-24 h-24 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o&&e.jsx("span",{className:"absolute top-2 right-2",children:e.jsx(z,{variant:"danger",children:"BEST"})}),a>0&&e.jsx("span",{className:"absolute top-2 left-2",children:e.jsxs(z,{variant:"warning",children:["~",a,"%"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:t}),s&&e.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:s}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-lg font-bold text-gray-900",children:r}),n&&e.jsx("p",{className:"text-xs text-gray-500",children:n})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:`text-xs font-medium ${l==="low"?"text-red-600":l==="available"?"text-gray-500":"text-gray-400"}`,children:i})}),e.jsx(P,{variant:"primary",fullWidth:!0,onClick:c,disabled:l==="out",children:l==="out"?"품절":"장바구니 담기"})]})]}),ke=({product:t,remainingStock:s,formatPrice:r,onAddToCart:n})=>{const a=t.discounts.length>0?Math.max(...t.discounts.map(c=>c.rate))*100:0,o=t.discounts.length>0?`${t.discounts[0].quantity}개 이상 구매시 할인 ${t.discounts[0].rate*100}%`:void 0,i=s===0?"out":s<=5?"low":"available",l=s===0?"품절":s<=5?`품절임박! ${s}개 남음`:`재고 ${s}개`;return e.jsx(we,{name:t.name,description:t.description,priceText:r(t.price,t.id),discountText:o,maxDiscountRate:a,isRecommended:t.isRecommended??!1,stockStatusText:l,stockStatus:i,onAddToCart:()=>n(t)})},Se=({products:t,cart:s,formatPrice:r,onAddToCart:n,searchTerm:a=""})=>t.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500",children:['"',a,'"에 대한 검색 결과가 없습니다.']})}):e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"전체 상품"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",t.length,"개 상품"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(o=>{const i=O({product:o,cart:s});return e.jsx(ke,{product:o,remainingStock:i,formatPrice:r,onAddToCart:n},o.id)})})]}),Te=({totalBeforeDiscount:t,totalAfterDiscount:s,onCompleteOrder:r})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"결제 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"상품 금액"}),e.jsxs("span",{className:"font-medium",children:[t.toLocaleString(),"원"]})]}),t-s>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"할인 금액"}),e.jsxs("span",{children:["-",(t-s).toLocaleString(),"원"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-t border-gray-200",children:[e.jsx("span",{className:"font-semibold",children:"결제 예정 금액"}),e.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[s.toLocaleString(),"원"]})]})]}),e.jsxs(P,{variant:"primary",fullWidth:!0,onClick:r,className:"mt-4 bg-yellow-400 hover:bg-yellow-500 text-gray-900",children:[s.toLocaleString(),"원 결제하기"]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500 text-center",children:e.jsx("p",{children:"* 실제 결제는 이루어지지 않습니다"})})]}),Le=({products:t,cart:s,coupons:r,searchTerm:n,formatPrice:a,onAddToCart:o,onUpdateQuantity:i,onRemoveFromCart:l,onClearCart:c,onAddNotification:u})=>{const[h,b]=d.useState(null);d.useEffect(()=>{h&&!r.find(j=>j.code===h.code)&&b(null)},[r,h]);const v=d.useMemo(()=>n?t.filter(j=>j.name.toLowerCase().includes(n.toLowerCase())||j.description&&j.description.toLowerCase().includes(n.toLowerCase())):t,[t,n]),N=d.useMemo(()=>ye({cart:s,selectedCoupon:h}),[s,h]),x=()=>{c(),b(null),u("주문이 완료되었습니다!","success")};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx(Se,{products:v,cart:s,isAdmin:!1,formatPrice:a,onAddToCart:o,searchTerm:n})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-24 space-y-4",children:[e.jsx(ve,{cart:s,onUpdateQuantity:i,onRemoveFromCart:l}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Ce,{coupons:r,selectedCoupon:h,onSelectCoupon:b}),e.jsx(Te,{totalBeforeDiscount:N.totalBeforeDiscount,totalAfterDiscount:N.totalAfterDiscount,onCompleteOrder:x})]})]})})]})},Pe=({products:t,formatPrice:s,onEditProduct:r,onDeleteProduct:n,onAddProduct:a})=>{const o=[{key:"name",header:"상품명",render:i=>e.jsx("span",{className:"font-medium text-gray-900",children:i})},{key:"price",header:"가격",render:(i,l)=>e.jsx("span",{className:"text-gray-500",children:s(l.price,l.id)})},{key:"stock",header:"재고",render:i=>e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i>10?"bg-green-100 text-green-800":i>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[i,"개"]})},{key:"description",header:"설명",render:i=>e.jsx("span",{className:"text-gray-500 max-w-xs truncate block",children:i||"-"})},{key:"actions",header:"작업",align:"right",render:(i,l)=>e.jsxs("div",{className:"font-medium",children:[e.jsx("button",{onClick:()=>r(l),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),e.jsx("button",{onClick:()=>n(l.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})}];return e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"상품 목록"}),e.jsx(P,{variant:"primary",size:"md",onClick:a,children:"새 상품 추가"})]})}),e.jsx(ee,{columns:o,data:t,keyExtractor:i=>i.id})]})},$e=({couponForm:t,onFormChange:s,onSubmit:r,onCancel:n,onAddNotification:a})=>{const o=[{value:"amount",label:"정액 할인"},{value:"percentage",label:"정률 할인"}],i=c=>{(c===""||/^\d+$/.test(c))&&s({...t,discountValue:c===""?0:parseInt(c)})},l=c=>{const u=parseInt(c)||0;t.discountType==="percentage"?u>100?(a("할인율은 100%를 초과할 수 없습니다","error"),s({...t,discountValue:100})):u<0&&s({...t,discountValue:0}):u>1e5?(a("할인 금액은 100,000원을 초과할 수 없습니다","error"),s({...t,discountValue:1e5})):u<0&&s({...t,discountValue:0})};return e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900",children:"새 쿠폰 생성"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(B,{label:"쿠폰명",type:"text",value:t.name,onChange:c=>s({...t,name:c.target.value}),placeholder:"신규 가입 쿠폰",className:"text-sm",required:!0}),e.jsx(B,{label:"쿠폰 코드",type:"text",value:t.code,onChange:c=>s({...t,code:c.target.value.toUpperCase()}),placeholder:"WELCOME2024",className:"text-sm font-mono",required:!0}),e.jsx(H,{label:"할인 타입",options:o,value:t.discountType,onChange:c=>s({...t,discountType:c.target.value}),className:"text-sm"}),e.jsx(B,{label:t.discountType==="amount"?"할인 금액":"할인율(%)",type:"text",value:t.discountValue===0?"":t.discountValue,onChange:c=>i(c.target.value),onBlur:c=>l(c.target.value),placeholder:t.discountType==="amount"?"5000":"10",className:"text-sm",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(P,{variant:"ghost",type:"button",onClick:n,children:"취소"}),e.jsx(P,{variant:"secondary",type:"submit",children:"쿠폰 생성"})]})]})})},Me=({name:t,code:s,discountText:r,onDelete:n})=>e.jsx(_,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 font-mono",children:s}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white text-indigo-700",children:r})})]}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-red-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),De=({coupons:t,onDeleteCoupon:s,onToggleCouponForm:r})=>e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[t.map(n=>{const a=n.discountType==="amount"?`${n.discountValue.toLocaleString()}원 할인`:`${n.discountValue}% 할인`;return e.jsx(Me,{name:n.name,code:n.code,discountText:a,onDelete:()=>s(n.code)},n.code)}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 flex items-center justify-center hover:border-gray-400 transition-colors",children:e.jsxs("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 flex flex-col items-center",children:[e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"mt-2 text-sm font-medium",children:"새 쿠폰 추가"})]})})]}),Ve=({coupons:t,showCouponForm:s,couponForm:r,onDeleteCoupon:n,onToggleCouponForm:a,onCouponFormChange:o,onCouponSubmit:i,onCouponFormCancel:l,onAddNotification:c})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold",children:"쿠폰 관리"})}),e.jsxs("div",{className:"p-6",children:[e.jsx(De,{coupons:t,onDeleteCoupon:n,onToggleCouponForm:a}),s&&e.jsx($e,{couponForm:r,onFormChange:o,onSubmit:i,onCancel:l,onAddNotification:c})]})]}),Ie=({isVisible:t,isEditing:s,productForm:r,onFormChange:n,onSubmit:a,onCancel:o,onAddNotification:i})=>t?e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:a,className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s?"상품 수정":"새 상품 추가"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:r.name,onChange:l=>n({...r,name:l.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("input",{type:"text",value:r.description,onChange:l=>n({...r,description:l.target.value}),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가격"}),e.jsx("input",{type:"text",value:r.price===0?"":r.price,onChange:l=>{const c=l.target.value;(c===""||/^\d+$/.test(c))&&n({...r,price:c===""?0:parseInt(c)})},onBlur:l=>{const c=l.target.value;c===""?n({...r,price:0}):parseInt(c)<0&&(i("가격은 0보다 커야 합니다","error"),n({...r,price:0}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"재고"}),e.jsx("input",{type:"text",value:r.stock===0?"":r.stock,onChange:l=>{const c=l.target.value;(c===""||/^\d+$/.test(c))&&n({...r,stock:c===""?0:parseInt(c)})},onBlur:l=>{const c=l.target.value;c===""?n({...r,stock:0}):parseInt(c)<0?(i("재고는 0보다 커야 합니다","error"),n({...r,stock:0})):parseInt(c)>9999&&(i("재고는 9999개를 초과할 수 없습니다","error"),n({...r,stock:9999}))},className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 px-3 py-2 border",placeholder:"숫자만 입력",required:!0})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"할인 정책"}),e.jsxs("div",{className:"space-y-2",children:[r.discounts.map((l,c)=>e.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded",children:[e.jsx("input",{type:"number",value:l.quantity,onChange:u=>{const h=[...r.discounts];h[c].quantity=parseInt(u.target.value)||0,n({...r,discounts:h})},className:"w-20 px-2 py-1 border rounded",min:"1",placeholder:"수량"}),e.jsx("span",{className:"text-sm",children:"개 이상 구매 시"}),e.jsx("input",{type:"number",value:l.rate*100,onChange:u=>{const h=[...r.discounts];h[c].rate=(parseInt(u.target.value)||0)/100,n({...r,discounts:h})},className:"w-16 px-2 py-1 border rounded",min:"0",max:"100",placeholder:"%"}),e.jsx("span",{className:"text-sm",children:"% 할인"}),e.jsx("button",{type:"button",onClick:()=>{const u=r.discounts.filter((h,b)=>b!==c);n({...r,discounts:u})},className:"text-red-600 hover:text-red-800",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c)),e.jsx("button",{type:"button",onClick:()=>{n({...r,discounts:[...r.discounts,{quantity:10,rate:.1}]})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"+ 할인 추가"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700",children:s?"수정":"추가"})]})]})}):null,qe=({products:t,showProductForm:s,editingProduct:r,productForm:n,formatPrice:a,onEditProduct:o,onDeleteProduct:i,onAddProductClick:l,onProductFormChange:c,onProductSubmit:u,onProductFormCancel:h,onAddNotification:b})=>e.jsxs("section",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx(Pe,{products:t,formatPrice:a,onEditProduct:o,onDeleteProduct:i,onAddProduct:l}),s&&e.jsx(Ie,{isVisible:s,isEditing:r!=="new",productForm:n,onFormChange:c,onSubmit:u,onCancel:h,onAddNotification:b})]}),Ae=({products:t,coupons:s,formatPrice:r,onAddProduct:n,onUpdateProduct:a,onDeleteProduct:o,onAddCoupon:i,onDeleteCoupon:l,onAddNotification:c})=>{const[u,h]=d.useState("products"),[b,v]=d.useState(!1),[N,x]=d.useState(null),[j,f]=d.useState({name:"",price:0,stock:0,description:"",discounts:[]}),[S,w]=d.useState(!1),[$,T]=d.useState({name:"",code:"",discountType:"amount",discountValue:0}),M=()=>{x("new"),v(!0),f({name:"",price:0,stock:0,description:"",discounts:[]})},D=g=>{x(g.id),v(!0),f({name:g.name,price:g.price,stock:g.stock,description:g.description||"",discounts:g.discounts||[]})},V=g=>{g.preventDefault();const m={...j,discounts:j.discounts.filter(p=>p.quantity>0&&p.rate>0)};N==="new"?n(m):N&&a(N,m),v(!1),x(null)},I=()=>{v(!1),x(null)},q=()=>{w(!S),S||T({name:"",code:"",discountType:"amount",discountValue:0})},A=g=>{g.preventDefault(),i($),w(!1),T({name:"",code:"",discountType:"amount",discountValue:0})},E=()=>{w(!1)};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"관리자 대시보드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"상품과 쿠폰을 관리할 수 있습니다"})]}),e.jsx(k,{value:u,onChange:h,children:e.jsxs(k.List,{children:[e.jsx(k.Tab,{value:"products",children:"상품 관리"}),e.jsx(k.Tab,{value:"coupons",children:"쿠폰 관리"})]})}),u==="products"?e.jsx(qe,{products:t,showProductForm:b,editingProduct:N,productForm:j,formatPrice:r,onEditProduct:D,onDeleteProduct:o,onAddProductClick:M,onProductFormChange:f,onProductSubmit:V,onProductFormCancel:I,onAddNotification:c}):e.jsx(Ve,{coupons:s,showCouponForm:S,couponForm:$,onDeleteCoupon:l,onToggleCouponForm:q,onCouponFormChange:T,onCouponSubmit:A,onCouponFormCancel:E,onAddNotification:c})]})};function W(t,s){const[r,n]=d.useState(()=>{if(typeof window>"u")return s;try{const o=window.localStorage.getItem(t);return o?JSON.parse(o):s}catch(o){return console.error(`Error loading ${t} from localStorage:`,o),s}}),a=o=>{try{const i=o instanceof Function?o(r):o;n(i)}catch(i){console.error(`Error setting ${t} to localStorage:`,i)}};return d.useEffect(()=>{try{r===s||Array.isArray(r)&&r.length===0?window.localStorage.removeItem(t):window.localStorage.setItem(t,JSON.stringify(r))}catch(o){console.error(`Error saving ${t} to localStorage:`,o)}},[t,r,s]),[r,a]}const Ee=[{name:"5000원 할인",code:"AMOUNT5000",discountType:"amount",discountValue:5e3},{name:"10% 할인",code:"PERCENT10",discountType:"percentage",discountValue:10}],Be=500,U={PRODUCTS:"products",CART:"cart",COUPONS:"coupons"},Oe=[{id:"p1",name:"상품1",price:1e4,stock:20,discounts:[{quantity:10,rate:.1},{quantity:20,rate:.2}],description:"최고급 품질의 프리미엄 상품입니다."},{id:"p2",name:"상품2",price:2e4,stock:20,discounts:[{quantity:10,rate:.15}],description:"다양한 기능을 갖춘 실용적인 상품입니다.",isRecommended:!0},{id:"p3",name:"상품3",price:3e4,stock:20,discounts:[{quantity:10,rate:.2},{quantity:30,rate:.25}],description:"대용량과 고성능을 자랑하는 상품입니다."}];function Re(){const[t,s]=W(U.PRODUCTS,Oe),r=d.useCallback(o=>{const i={...o,id:`p${Date.now()}`};s(l=>[...l,i])},[s]),n=d.useCallback((o,i)=>{s(l=>l.map(c=>c.id===o?{...c,...i}:c))},[s]),a=d.useCallback(o=>{s(i=>i.filter(l=>l.id!==o))},[s]);return{products:t,addProduct:r,updateProduct:n,deleteProduct:a}}function We(){const[t,s]=W(U.CART,[]),[r,n]=d.useState(0);d.useEffect(()=>{n(fe(t))},[t]);const a=d.useCallback(c=>{s(u=>pe({cart:u,product:c}))},[s]),o=d.useCallback(c=>{s(u=>K({cart:u,productId:c}))},[s]),i=d.useCallback((c,u)=>{s(h=>je({cart:h,productId:c,quantity:u}))},[s]),l=d.useCallback(()=>{s([])},[s]);return{cart:t,totalItemCount:r,addToCart:a,removeFromCart:o,updateQuantity:i,clearCart:l}}function Ue(){const[t,s]=W(U.COUPONS,Ee),r=d.useCallback(a=>{s(o=>[...o,a])},[s]),n=d.useCallback(a=>{s(o=>o.filter(i=>i.code!==a))},[s]);return{coupons:t,addCoupon:r,deleteCoupon:n}}function ze(){const[t,s]=d.useState([]),r=d.useCallback((a,o="success")=>{const i=Date.now().toString();s(l=>[...l,{id:i,message:a,type:o}]),setTimeout(()=>{s(l=>l.filter(c=>c.id!==i))},3e3)},[]),n=d.useCallback(a=>{s(o=>o.filter(i=>i.id!==a))},[]);return{notifications:t,addNotification:r,removeNotification:n}}const He=t=>`₩${t.toLocaleString()}`,_e=t=>`${t.toLocaleString()}원`,Qe=t=>t<=0;function Je(t,s=Be){const[r,n]=d.useState(t);return d.useEffect(()=>{const a=setTimeout(()=>{n(t)},s);return()=>{clearTimeout(a)}},[t,s]),r}const Ke=()=>{const{products:t,addProduct:s,updateProduct:r,deleteProduct:n}=Re(),{cart:a,totalItemCount:o,addToCart:i,removeFromCart:l,updateQuantity:c,clearCart:u}=We(),{coupons:h,addCoupon:b,deleteCoupon:v}=Ue(),{notifications:N,addNotification:x,removeNotification:j}=ze(),[f,S]=d.useState(!1),[w,$]=d.useState(""),T=Je(w,500),M=d.useCallback(m=>{s(m),x("상품이 추가되었습니다.","success")},[s,x]),D=d.useCallback((m,p)=>{r(m,p),x("상품이 수정되었습니다.","success")},[r,x]),V=d.useCallback(m=>{n(m),x("상품이 삭제되었습니다.","success")},[n,x]),I=d.useCallback(m=>{if(h.find(y=>y.code===m.code)){x("이미 존재하는 쿠폰 코드입니다.","error");return}b(m),x("쿠폰이 추가되었습니다.","success")},[h,b,x]),q=d.useCallback(m=>{v(m),x("쿠폰이 삭제되었습니다.","success")},[v,x]),A=d.useCallback(m=>{if(O({cart:a,product:m})<=0){x("재고가 부족합니다!","error");return}const y=a.find(C=>C.product.id===m.id);if(y&&y.quantity+1>m.stock){x(`재고는 ${m.stock}개까지만 있습니다.`,"error");return}i(m),x("장바구니에 담았습니다","success")},[a,i,x]),E=d.useCallback((m,p)=>{const y=t.find(Y=>Y.id===m);if(!y)return;const C=y.stock;if(p>C){x(`재고는 ${C}개까지만 있습니다.`,"error");return}c(m,p)},[t,c,x]),g=d.useCallback((m,p)=>{if(p){const y=t.find(C=>C.id===p);if(y){const C=O({product:y,cart:a});if(Qe(C))return"SOLD OUT"}}return f?_e(m):He(m)},[t,a,f]);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(de,{notifications:N,onClose:j}),e.jsxs(L,{children:[e.jsxs(L.Left,{children:[e.jsx(te,{text:"SHOP"}),!f&&e.jsx(se,{value:w,onChange:$,placeholder:"상품 검색..."})]}),e.jsxs(L.Right,{children:[e.jsx(ne,{isActive:f,activeText:"쇼핑몰로 돌아가기",inactiveText:"관리자 페이지로",onClick:()=>S(!f)}),!f&&e.jsx(re,{count:o})]})]}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 py-8",children:f?e.jsx(Ae,{products:t,coupons:h,formatPrice:g,onAddProduct:M,onUpdateProduct:D,onDeleteProduct:V,onAddCoupon:I,onDeleteCoupon:q,onAddNotification:x}):e.jsx(Le,{products:t,cart:a,coupons:h,searchTerm:T,formatPrice:g,onAddToCart:A,onUpdateQuantity:E,onRemoveFromCart:l,onClearCart:u,onAddNotification:x})})]})};G.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(Ke,{})}));
